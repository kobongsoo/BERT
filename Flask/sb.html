<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body style="margin: 30;">
    <div class="card border-dark mb-3" style="min-width: 30rem; max-width: 30rem;">
      <div class="card-header">sentence bert 문장 유사도 측정(zero-shot-classification)</div>
      <div class="card-body text-dark">
        <h5 class="card-title">쿼리문장과 라벨문장들의 유사도를 측정합니다. </h5>
        <p class="card-text">쿼리문장은 1문장입력, 라벨문장은 여러문장을 ,구분자로 하여 입력하면 됩니다.(예:식사를 한다, 영화를 본다, 공부를 한다)</p>
		<input type="text" class="form-control" aria-describedby="basic-addon3" id="querys" name="querys" placeholder="쿼리 문장을 입력하세요"/>
        <input type="text" class="form-control" aria-describedby="basic-addon3" id="labels" onkeypress="if(event.keyCode==13) {api_call(); return false;}" name="labels" placeholder="라벨 문장들을 입력후 Enterkey를 누르세요"/>
        <p class="card-text">
            <div class="alert alert-info" role="alert">
                <p id="querys-data" class="mb-0"></p>
				<p></p>
				<p id="result-data" class="mb-0"></p>
				<p></p>
				<p id="proctime" class="mb-0"></p>
            </div>
        </p>
        <hr>
        <p class="card-text"><small class="text-muted">이 예제는 sentenc-bert 모델(이하: sbert)을 이용하여 문장 유사도를 측정하는 예제입니다. 해당 sbert는 bert-base-multiligual-cased 모델에 kowiki20200920 말뭉치를 가지고, 한글 추가 학습시킨 후, sbert를 만들고, 추가적으로 nli/sts를 학습시킨 모델입니다.참고로 tearch-student 증류학습도 시켰으므로, 영어와 한국어도 어느정도 문맥이 일치한 결과를 얻을수 있습니다</small></p>
      </div>
    </div>
</body>

<script>
function api_call() {
    var q = $("#querys").val();
	var l = $("#labels").val();
	var data = {querys: q, labels: l}
    console.log(data);
    $.ajax({
        url: "/api_sb",
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(data),
        success: function( data, textStatus, jQxhr ){
            $('#querys-data').html( data.querys );
            $('#result-data').html( data.result );
			$('#proctime').html( data.proctime );
            $("#querys").val("");
			$("#labels").val("");
        },
        error: function( jqXhr, textStatus, errorThrown ){
            $('#api_output').html( "There was an error" );
            console.log( errorThrown );
        },
        timeout: 3000
    });
}
</script>